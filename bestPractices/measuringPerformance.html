<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title></title>
</head>
<body>

  <h1> Measuring Performance </h1>

  <script>
  function Knight (name, regiment) {
    this.name = name;
    this.regiment = regiment;

    switch (regiment) {
      case 1:
      this.weapon = "Broadsword";
      break;
      case 2:
      this.weapon = "Claymore";
      break;
      case 4:
      this.weapon = "Mace";
      break;
      case 5:
      this.weapon = "War Hammer"
      break;
      case 6:
      this.weapon = "Battle Axe";
      break;
      case 3:
      case 7:
      case 8:
      this.weapon = "Morning Star";
      break;
      case "King":
      this.weapon = "Excalibur";
      default:
      alert(name + " has an incorect regiment !");
    }
  }

  function SpeedTest(testImplement, testParams, repetitions){
    this.testImplement = testImplement;
    this.testParams = testParams;
    this.repetitions = repetitions || 10000;
    this.average = 0;
  }

  SpeedTest.prototype = {
    startTest: function(){
      var beginTime, endTime, sumTimes = 0;
      for (var i = 0, x = this.repetitions; i < x; i++) {
        beginTime = +new Date();
        this.testImplement(this.testParams);
        endTime = +new Date();
        sumTimes += endTime - beginTime;
      }
      this.average = sumTimes / this.repetitions;
      return console.log("Average exectuin across " +
      this.repetitions + ": " +
      this.average);
    }
  }

  // test vars
  var firstRegimentNoobs = ["Alex", "Blade", "Magneto", "Mistyque"];
  var firstRegimentKnights = [];
  for (var i = 0; i < 2000; i++){
    var newKnight = "knight" + i;
    firstRegimentKnights.push(newKnight);
  }
  var listsForTest = [firstRegimentNoobs, firstRegimentKnights];

  var BestPractices = function(listOfParams){
    for (var i = 0, x = listOfParams[0].length; i < x; i++) {
      listOfParams[1].push(new Knight(listOfParams[0][i], 1));
    }
  };

  var BestPracticesTest = new SpeedTest(BestPractices, listsForTest, 100000);
  BestPracticesTest.startTest();
  </script>
</body>
</html>
